!function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror"),require("../yaml/yaml")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../yaml/yaml"],a):a(CodeMirror)}(function(a){var b=0,c=1,d=2;a.defineMode("yaml-frontmatter",function(e,f){function g(a){return a.state==c?{mode:h,state:a.yaml}:{mode:i,state:a.inner}}var h=a.getMode(e,"yaml"),i=a.getMode(e,f&&f.base||"gfm");return{startState:function(){return{state:b,yaml:null,inner:a.startState(i)}},copyState:function(b){return{state:b.state,yaml:b.yaml&&a.copyState(h,b.yaml),inner:a.copyState(i,b.inner)}},token:function(e,f){if(f.state==b)return e.match("---",!1)?(f.state=c,f.yaml=a.startState(h),h.token(e,f.yaml)):(f.state=d,i.token(e,f.inner));if(f.state==c){var g=e.sol()&&e.match(/(---|\.\.\.)/,!1),j=h.token(e,f.yaml);return g&&(f.state=d,f.yaml=null),j}return i.token(e,f.inner)},innerMode:g,indent:function(b,c,d){var e=g(b);return e.mode.indent?e.mode.indent(e.state,c,d):a.Pass},blankLine:function(a){var b=g(a);return b.mode.blankLine?b.mode.blankLine(b.state):void 0}}})});